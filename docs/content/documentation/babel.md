# Babel

**Added in:** <small>1.1.0-0(beta)</small>

**Stone** CSS-in-JS comes with a babel plugin that you can use for generating static CSS files for you. This comes as a solution to the web-io adaptor since that's going to be removed from the API in the next major release, till then you can use it with the `stone-cli` solution if you wish to.

## Installation

You don't need to install anything separately, the plugin comes with the original package

```sh
npm i @barelyhuman/stone
# or
yarn add @barelyhuman/stone
```

## Usage

While being simple, it still requires a small configuration step.

this is what a generic `theme.stone.js` file would look like

```js
import { createColors, createCSS } from "../dist";

const colors = createColors({
  black: "#000",
  blue: "#00f",
});

const theme = {
  colors,
};

const css = createCSS(theme);

export default css;
```

We just need to change the last line to the following

```js
export { css as default, theme };
// or
export { css, theme };
```

The point is to make sure you export the `theme` object so the babel plugin can require and use it.

After this, all you have to do is change your `babel` configuration to point to the theme config while using the provided plugin.

```json
{
  "plugins": [
    [
      "@barelyhuman/stone/babel",
      {
        "themeFile": "./theme.stone.js"
      }
    ]
  ]
}
```

```js
// example

const buttonStyle = css`
  padding: 0 10px;
  font-size: 14px;
  line-height: 27px;
  background-color: ${(theme) => theme.colors.blue.value()};
  color: ${(theme) => theme.colors.black.value()};

  &:hover {
    background-color: ${(theme) => theme.colors.black.value()};
  }
`;
```

and that's it, it will then generate your Static CSS files for you.

## Caveats

1. Due to the nature of the plugin, you cannot use it without providing a `themeFile`
2. The arrow functions cannot do anything other than use the theme variable in the way shown above, since any more calculation inside the arrow function would mess with the plugin and get too complex. (this might change as and when we improve the handling of dynamic cases)

## Development Practices

1. The CSS files generated by the plugin are named `.stone.css` this is done for the reason that these files would get generated during development and production builds so you can add them to `.gitignore` and it won't really matter since these would be built again during the parsing phase of your development tool.

2. Same as [Caveats](#caveats) point 2.
